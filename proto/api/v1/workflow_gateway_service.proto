syntax = "proto3";

package api.v1;

import "google/api/annotations.proto";
import "workflow/v1/execution_service.proto"; 
import "workflow/v1/workflow_service.proto"; 

option go_package = "github.com/spounge-ai/spounge-protos/gen/go/api/v1;apiv1";

service WorkflowGatewayService {
  rpc CreateWorkflow(WorkflowGatewayServiceCreateWorkflowRequest) returns (WorkflowGatewayServiceCreateWorkflowResponse) {
    option (google.api.http) = {
      post: "/v1/workflows"
      body: "*"
    };
  }
  rpc GetWorkflow(WorkflowGatewayServiceGetWorkflowRequest) returns (WorkflowGatewayServiceGetWorkflowResponse) {
    option (google.api.http) = {get: "/v1/workflows/{get_workflow_request.workflow_id}"};
  }
  rpc ListWorkflows(WorkflowGatewayServiceListWorkflowsRequest) returns (WorkflowGatewayServiceListWorkflowsResponse) {
    option (google.api.http) = {get: "/v1/workflows"};
  }

  rpc StartExecution(WorkflowGatewayServiceStartExecutionRequest) returns (WorkflowGatewayServiceStartExecutionResponse) {
    option (google.api.http) = {
      post: "/v1/workflows/{start_execution_request.workflow_id}/execute"
      body: "*"
    };
  }
  rpc GetExecution(WorkflowGatewayServiceGetExecutionRequest) returns (WorkflowGatewayServiceGetExecutionResponse) {
    option (google.api.http) = {get: "/v1/executions/{get_execution_request.execution_id}"};
  }
}

message WorkflowGatewayServiceCreateWorkflowRequest {
  workflow.v1.CreateWorkflowRequest create_workflow_request = 1;
}

message WorkflowGatewayServiceCreateWorkflowResponse {
  workflow.v1.CreateWorkflowResponse create_workflow_response = 1;
}

message WorkflowGatewayServiceGetWorkflowRequest {
  workflow.v1.GetWorkflowRequest get_workflow_request = 1;
}

message WorkflowGatewayServiceGetWorkflowResponse {
  workflow.v1.GetWorkflowResponse get_workflow_response = 1;
}

message WorkflowGatewayServiceListWorkflowsRequest {
  workflow.v1.ListWorkflowsRequest list_workflows_request = 1;
}

message WorkflowGatewayServiceListWorkflowsResponse {
  workflow.v1.ListWorkflowsResponse list_workflows_response = 1;
}

message WorkflowGatewayServiceStartExecutionRequest {
  workflow.v1.StartExecutionRequest start_execution_request = 1;
}

message WorkflowGatewayServiceStartExecutionResponse {
  workflow.v1.StartExecutionResponse start_execution_response = 1;
}

message WorkflowGatewayServiceGetExecutionRequest {
  workflow.v1.GetExecutionRequest get_execution_request = 1;
}

message WorkflowGatewayServiceGetExecutionResponse {
  workflow.v1.GetExecutionResponse get_execution_response = 1;
}
